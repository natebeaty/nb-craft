{% extends (craft.app.request.isAjax and not craft.app.request.isLivePreview) ? "_ajax-layout" : "_layout" %}
{% set title = entry.title %}
{% if entry.seoDescription %}{% set description = entry.seoDescription %}{% endif %}

{% set params = craft.entries.section('comics').orderBy('postDate desc, id asc') %}
{% set prevEntry = entry.getPrev(params) %}
{% set nextEntry = entry.getNext(params) %}

{% block content %}
  <article class="comic is-single" data-page="{{ entry.url|replace((siteUrl), '/') }}" data-page-title="{{ entry.title }}">
    <h1>{{ entry.title }}</h1>
    <div class="meta user-content">
      <div class="body">{{ entry.body }}</div>
      <div class="info">{{ entry.shortDescription }}</div>
      {% if entry.price > 0 %}
        <a class="buy" href="#" data-price="{{ entry.price }}" data-title="{{ entry.title|escape }}" data-id="{{ entry.id }}">Buy â€” ${{ entry.price + 0 }}</a>
      {% endif %}
    </div>
    {% for image in entry.comicPages.all() %}
      <div class="ratiowrap" style="padding-bottom:{{ image.height / image.width * 100 }}%;max-width:{{ image.width }}px;max-height:{{ image.height }}px">
        <img class="wrapped"
          width="{{ image.width }}" height="{{ image.height }}"
          src="{{ craft.app.config.general.cdnUrl }}{{ image.getUrl('listing') }}"
          srcset="{{ craft.app.config.general.cdnUrl }}{{ image.getUrl('listing') }} 750w, {{ craft.app.config.general.cdnUrl }}{{ image.getUrl() }} {{ image.width }}w,"
          sizes="(max-width: 768px) 100vw, (max-width: 1500px) 750px, 960px"
          alt="{{ image.title ? image.title : entry.title }}"
        />
      </div>
    {% endfor %}
  </article>

  {% include "partials/_pagination" %}
{% endblock %}
